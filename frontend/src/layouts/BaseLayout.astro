---
import Navbar from "../components/Navbar";
import { strediskoFull } from "../helpers/api/stredisko";
import { oddilyDruziny } from "../helpers/api/oddily";
import Footer from "../components/Footer";

const stredisko = await strediskoFull();

const oddily = await oddilyDruziny();

export interface Props {
  title?: string;
}

const title = Astro.props.title
  ? Astro.props.title + `| ${stredisko.Nazev}`
  : `Skautské středisko ${stredisko.Nazev}`;
---

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="global.css" />
    <title>{title}</title>
  </head>
  <body class="h-screen flex flex-col">
    <Navbar
      client:load
      Nazev={stredisko.Nazev}
      SocialniSite={stredisko.SocialniSite}
      oddily={oddily.map((x) => {
        return {
          Nazev: x.Nazev,
          Url: x.Url,
          druziny: x.druziny.map((y) => {
            return { Nazev: y.Nazev, Url: y.Url };
          }),
        };
      })}
      fotky={stredisko.Fotky}
    />
    <div class="w-full flex-1 flex flex-col overflow-y-auto bg-gray-100">
      <slot />
      <Footer
        CelyNazev={stredisko.CelyNazev}
        CisloStrediska={stredisko.CisloStrediska}
        CisloUctu={stredisko.CisloUctu}
        Ico={stredisko.Ico}
        Sidlo={stredisko.Sidlo}
        SocialniSite={stredisko.SocialniSite}
        oddily={oddily}
      />
    </div>
  </body>
</html>
